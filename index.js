(()=>{"use strict";var n={606:(n,e,t)=>{t.d(e,{Z:()=>a});var r=t(645),i=t.n(r)()((function(n){return n[1]}));i.push([n.id,":root {\r\n  --primary-color: #61e8d2;\r\n  --btn-color: #b0e0e6;\r\n  --start-color: #31a828;\r\n  --stop-color: red;\r\n  --black-color: black;\r\n  --nav-btn-color: #f2a31b;\r\n}",""]);const a=i},767:(n,e,t)=>{t.d(e,{Z:()=>a});var r=t(645),i=t.n(r)()((function(n){return n[1]}));i.push([n.id,"* {\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nhtml {\r\n  overflow-x: hidden;\r\n  margin-right: calc(-1 * (100vw - 100%));\r\n}\r\n\r\nnav {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  padding: 5px;\r\n  background-color: var(--primary-color);\r\n}\r\n\r\n.nav-button {\r\n  padding: 5px 15px;\r\n  background-color: var(--nav-btn-color);\r\n  text-transform: uppercase;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.garage-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  padding: 0 0 55px 5%;\r\n}\r\n\r\n.garage-forms {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  width: 345px;\r\n}\r\n\r\n.create-form, .update-form {\r\n  align-content: center;\r\n  column-gap: 20px;\r\n  display: flex;\r\n  margin-top: 20px;\r\n}\r\n\r\n.garage-controls {\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.btn {\r\n  background-color: var(--btn-color);\r\n  border-radius: 10px;\r\n  padding: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.garage {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.car-name {\r\n  font-weight: bold;\r\n}\r\n\r\n.garage-cars {\r\n  list-style-type: none;\r\n  outline: none;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.car-buttons {\r\n  display: flex;\r\n  align-items: center;\r\n  column-gap: 10px;\r\n  margin-bottom: 7px;\r\n}\r\n\r\n.race {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: dashed var(--black-color) 3px;\r\n  width: 95%;\r\n}\r\n\r\n.start-panel {\r\n  display: flex;\r\n  gap: 5px;\r\n}\r\n\r\n.start-engine-btn {\r\n  border: 2px solid var(--start-color);\r\n  color: var(--start-color);\r\n  background-color: transparent;\r\n  border-radius: 8px;\r\n  height: 30px;\r\n  width: 30px;\r\n  cursor: pointer;\r\n}\r\n\r\n.stop-engine-btn {\r\n  border: 2px solid var(--stop-color);\r\n  color: var(--stop-color);\r\n  background-color: transparent;\r\n  border-radius: 8px;\r\n  height: 30px;\r\n  width: 30px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:disabled {\r\n  cursor: not-allowed;\r\n  filter: grayscale(100);\r\n  opacity: 0.7;\r\n}\r\n\r\n.car-img {\r\n  display: block;\r\n  padding-top: 15px;\r\n  height: 40px;\r\n  width: 80px;\r\n}\r\n\r\n.finish-flag img {\r\n  display: block;\r\n  height: 45px;\r\n  width: 45px;\r\n  margin-right: 60px;\r\n}\r\n\r\n.garage-pagination {\r\n  position: absolute;\r\n  width: 100px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  top: 1030px;\r\n}\r\n\r\n.winners {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.winners-container {\r\n  padding: 0 0 20px 5%;\r\n  display: none;\r\n}\r\n\r\n.winners-table {\r\n  margin: 0 auto;\r\n  margin-bottom: 20px;\r\n  font-size: 14px;\r\n  border-radius: 10px;\r\n  border-spacing: 0;\r\n  text-align: center;\r\n}\r\n\r\n.winners-table, th, td {\r\n  border: 1px solid var(--black-color);\r\n  border-collapse: collapse;\r\n}\r\n\r\nth {\r\n  padding: 10px 20px;\r\n  background: var(--primary-color);\r\n}\r\n\r\ntd {\r\n  padding: 5px 10px;\r\n  text-align: center;\r\n}\r\n\r\n.winner-message {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: calc(50% - 250px);\r\n  width: 500px;\r\n  height: 100px;\r\n  font-size: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: var(--primary-color);\r\n  color: var(--black-color);\r\n  opacity: 0.7;\r\n  border-radius: 15px;\r\n}\r\n\r\n.winners-pagination {\r\n  position: absolute;\r\n  width: 100px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  top: 710px;\r\n}\r\n",""]);const a=i},645:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t=n(e);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t})).join("")},e.i=function(n,t,r){"string"==typeof n&&(n=[[null,n,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<n.length;s++){var d=[].concat(n[s]);r&&i[d[0]]||(t&&(d[2]?d[2]="".concat(t," and ").concat(d[2]):d[2]=t),e.push(d))}},e}},937:(n,e,t)=>{t.r(e),t.d(e,{default:()=>o});var r=t(379),i=t.n(r),a=t(606);i()(a.Z,{insert:"head",singleton:!1});const o=a.Z.locals||{}},427:(n,e,t)=>{t.r(e),t.d(e,{default:()=>o});var r=t(379),i=t.n(r),a=t(767);i()(a.Z,{insert:"head",singleton:!1});const o=a.Z.locals||{}},379:(n,e,t)=>{var r,i=function(){var n={};return function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}n[e]=t}return n[e]}}(),a=[];function o(n){for(var e=-1,t=0;t<a.length;t++)if(a[t].identifier===n){e=t;break}return e}function s(n,e){for(var t={},r=[],i=0;i<n.length;i++){var s=n[i],d=e.base?s[0]+e.base:s[0],c=t[d]||0,l="".concat(d," ").concat(c);t[d]=c+1;var u=o(l),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(a[u].references++,a[u].updater(p)):a.push({identifier:l,updater:m(p,e),references:1}),r.push(l)}return r}function d(n){var e=document.createElement("style"),r=n.attributes||{};if(void 0===r.nonce){var a=t.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(n){e.setAttribute(n,r[n])})),"function"==typeof n.insert)n.insert(e);else{var o=i(n.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var c,l=(c=[],function(n,e){return c[n]=e,c.filter(Boolean).join("\n")});function u(n,e,t,r){var i=t?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(n.styleSheet)n.styleSheet.cssText=l(e,i);else{var a=document.createTextNode(i),o=n.childNodes;o[e]&&n.removeChild(o[e]),o.length?n.insertBefore(a,o[e]):n.appendChild(a)}}function p(n,e,t){var r=t.css,i=t.media,a=t.sourceMap;if(i?n.setAttribute("media",i):n.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleSheet)n.styleSheet.cssText=r;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(r))}}var h=null,g=0;function m(n,e){var t,r,i;if(e.singleton){var a=g++;t=h||(h=d(e)),r=u.bind(null,t,a,!1),i=u.bind(null,t,a,!0)}else t=d(e),r=p.bind(null,t,e),i=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)};return r(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;r(n=e)}else i()}}n.exports=function(n,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var t=s(n=n||[],e);return function(n){if(n=n||[],"[object Array]"===Object.prototype.toString.call(n)){for(var r=0;r<t.length;r++){var i=o(t[r]);a[i].references--}for(var d=s(n,e),c=0;c<t.length;c++){var l=o(t[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}t=d}}}},717:function(n,e,t){var r=this&&this.__awaiter||function(n,e,t,r){return new(t||(t=Promise))((function(i,a){function o(n){try{d(r.next(n))}catch(n){a(n)}}function s(n){try{d(r.throw(n))}catch(n){a(n)}}function d(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(o,s)}d((r=r.apply(n,e||[])).next())}))},i=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(t(969)),o=i(t(398)),s=i(t(425)),d=t(4),c=t(143);let l;e.default=class{constructor(){this.garage=new o.default,this.winners=new s.default,this.garage.createGarageContainer(),this.paginationPage=1,this.updateName=document.getElementById("update-name"),this.updateColor=document.getElementById("update-color"),this.updateBtn=document.getElementById("update-submit")}start(){return r(this,void 0,void 0,(function*(){this.updateGarage(),this.eventListeners()}))}updateGarage(){return r(this,void 0,void 0,(function*(){const{cars:n,totalCount:e}=yield this.getCars(this.paginationPage);e&&this.garage.garageContent(n,e,this.paginationPage)}))}getCars(n,e=d.NUMBER_SEVEN){return r(this,void 0,void 0,(function*(){const t=yield fetch(`\n    ${d.GARAGE}?_page=${n}&_limit=${e}`);return{cars:yield t.json(),totalCount:t.headers.get("X-Total-Count")}}))}eventListeners(){const n=document.getElementById("race"),e=document.getElementById("reset");n.addEventListener("click",(()=>r(this,void 0,void 0,(function*(){n.disabled=!0,document.getElementById("generator").disabled=!0,document.getElementById("create-submit").disabled=!0,document.getElementById("update-submit").disabled=!0,document.querySelectorAll(".remove-btn").forEach((n=>{n.disabled=!0})),document.querySelectorAll(".select-btn").forEach((n=>{n.disabled=!0})),this.startRace()})))),e.addEventListener("click",(()=>r(this,void 0,void 0,(function*(){n.disabled=!1,e.disabled=!0,document.getElementById("generator").disabled=!1,document.getElementById("create-submit").disabled=!1,document.getElementById("update-submit").disabled=!1,document.querySelectorAll(".remove-btn").forEach((n=>{n.disabled=!1})),document.querySelectorAll(".select-btn").forEach((n=>{n.disabled=!1})),this.stopRace()})))),this.formEventListeners(),this.navEventListeners(),this.carEventListeners(),this.paginationEventListeners()}carEventListeners(){window.addEventListener("click",(n=>r(this,void 0,void 0,(function*(){const e=n.target;"btn remove-btn"===e.className&&this.removeCar(e),"btn select-btn"===e.className&&this.selectCar(e),"start-engine-btn"===e.className&&this.startEngine(e.id.split("-")[3]),"stop-engine-btn"===e.className&&this.stopEngine(e.id.split("-")[3])})))),document.getElementById("generator").addEventListener("click",(()=>r(this,void 0,void 0,(function*(){this.generateCars()}))))}formEventListeners(){document.getElementById("create").addEventListener("submit",(n=>r(this,void 0,void 0,(function*(){n.preventDefault(),this.createCarAction(),this.updateGarage()})))),document.getElementById("update").addEventListener("submit",(n=>r(this,void 0,void 0,(function*(){n.preventDefault(),this.updateCar(),this.updateName&&this.updateColor&&this.updateBtn&&(this.updateName.value="",this.updateColor.value="#000000",this.updateName.disabled=!0,this.updateColor.disabled=!0,this.updateBtn.disabled=!0)}))))}navEventListeners(){const n=document.getElementById("garage-view"),e=document.getElementById("winners-view"),t=document.querySelector(".garage-container"),r=document.querySelector(".winners-container");n.addEventListener("click",(()=>{r.style.display="none",t.style.display="flex"})),e.addEventListener("click",(()=>{this.winners.updateWinners(),r.style.display="flex",t.style.display="none"}))}paginationEventListeners(){document.getElementById("garage-next").addEventListener("click",(()=>{this.nextAction()})),document.getElementById("garage-prev").addEventListener("click",(()=>r(this,void 0,void 0,(function*(){this.prevAction()}))))}startRace(){return r(this,void 0,void 0,(function*(){const{cars:n}=yield this.getCars(this.paginationPage,d.NUMBER_SEVEN);let e=!1;n.forEach((n=>r(this,void 0,void 0,(function*(){const t=n.id.toString(),{raceStatus:r,raceTime:i}=yield this.startEngine(t);if((yield r)===d.SUCCESS_STATUS&&!e){e=!0;const n=yield(yield fetch(`${d.GARAGE}/${t}`)).json(),r=Number((Number(i)/d.NUMBER_ONE_THOUSAND).toFixed(2));this.winners.createWinnerMessage(n.name,r),this.winners.addWinner(t,r),document.getElementById("reset").disabled=!1}}))))}))}stopRace(){return r(this,void 0,void 0,(function*(){const{cars:n}=yield this.getCars(this.paginationPage,d.NUMBER_SEVEN);n.forEach((n=>r(this,void 0,void 0,(function*(){const e=n.id.toString();this.stopEngine(e)}))))}))}startEngine(n){return r(this,void 0,void 0,(function*(){const e=document.getElementById(`start-engine-car-${n}`),t=document.getElementById(`stop-engine-car-${n}`),r=yield(yield fetch(`${d.ENGINE}?id=${n}&status=started`,{method:"PATCH"})).json(),i=Math.round(r.distance/r.velocity),o=document.getElementById(`car-${n}`),s=document.getElementById(`finish-${n}`),c=this.getPosition(o),l=this.getPosition(s),u=Math.floor(Math.sqrt(Math.pow(c-l,2))+d.NUMBER_TWENTY),p=(0,a.default)(o,u,n,i);return e.disabled=!0,t.disabled=!1,{raceStatus:p,raceTime:i}}))}stopEngine(n){return r(this,void 0,void 0,(function*(){const e=document.getElementById(`stop-engine-car-${n}`),t=document.getElementById(`start-engine-car-${n}`);yield fetch(`${d.ENGINE}?id=${n}&status=stopped`,{method:"PATCH"});const r=document.getElementById(`car-${n}`);window.cancelAnimationFrame(d.animationMap[n]),r.style.transform="translateX(0)",t.disabled=!1,e.disabled=!0}))}getPosition(n){const{left:e,width:t}=n.getBoundingClientRect();return e+t/2}generateCars(){return r(this,void 0,void 0,(function*(){for(let n=0;n<d.NUMBER_ONE_HUNDRED;n++){const n={name:c.carBrands[Math.floor(Math.random()*c.carBrands.length)]+" "+c.carModels[Math.floor(Math.random()*c.carModels.length)],color:this.getRandomColor()};yield fetch(d.GARAGE,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}this.updateGarage()}))}getRandomColor(){const n="0123456789ABCDEF";let e="#";for(let t=0;t<6;t++)e+=n[Math.floor(Math.random()*n.length)];return e}createCarAction(){return r(this,void 0,void 0,(function*(){const n={name:document.getElementById("create-name").value,color:document.getElementById("create-color").value};yield fetch(d.GARAGE,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}),document.getElementById("create-name").value=""}))}removeCar(n){return r(this,void 0,void 0,(function*(){const e=n.id.split("-")[2];yield fetch(`${d.GARAGE}/${e}`,{method:"DELETE"}),yield fetch(`${d.WINNERS}/${e}`,{method:"DELETE"}),this.updateGarage()}))}selectCar(n){return r(this,void 0,void 0,(function*(){const e=n.id.split("-")[2];l=(yield fetch(`${d.GARAGE}/${e}`)).json(),this.updateName.value=(yield l).name,this.updateColor.value=(yield l).color,this.updateName.disabled=!1,this.updateColor.disabled=!1,this.updateBtn.disabled=!1}))}updateCar(){return r(this,void 0,void 0,(function*(){const n=this.updateName.value,e=this.updateColor.value,t=(yield l).id,r={name:n,color:e};yield fetch(`${d.GARAGE}/${t}`,{method:"PATCH",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}),this.updateGarage()}))}nextAction(){return r(this,void 0,void 0,(function*(){const{totalCount:n}=yield this.getCars(this.paginationPage);n&&Number(n)/(d.NUMBER_SEVEN*this.paginationPage)>1&&(this.paginationPage+=1,this.updateGarage())}))}prevAction(){return r(this,void 0,void 0,(function*(){this.paginationPage>1&&(this.paginationPage-=1,this.updateGarage())}))}}},969:function(n,e,t){var r=this&&this.__awaiter||function(n,e,t,r){return new(t||(t=Promise))((function(i,a){function o(n){try{d(r.next(n))}catch(n){a(n)}}function s(n){try{d(r.throw(n))}catch(n){a(n)}}function d(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(o,s)}d((r=r.apply(n,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=t(4);e.default=function(n,e,t,a){return r(this,void 0,void 0,(function*(){let r=null,o=0;o=window.requestAnimationFrame((function s(d){r||(r=d);const c=e/a,l=d-r,u=Math.round(c*l);n.style.transform=`translateX(${Math.min(u,e)}px)`,u<e&&(o=window.requestAnimationFrame(s),i.animationMap[t]=o)}));const s=yield fetch(`${i.ENGINE}?id=${t}&status=drive`,{method:"PATCH"});return s.status!==i.SUCCESS_STATUS&&window.cancelAnimationFrame(o),s.status}))}},398:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class t{createHeader(){return'\n            <header>\n              <nav>\n                <div class="nav-button" id="garage-view">Garage</div>\n                <div class="nav-button" id="winners-view">Winners</div>\n              </nav>\n            </header>\n          '}createGarageContainer(){const n=document.querySelector("body");return n.innerHTML=`${this.createHeader()}\n                      <div class="garage-container">\n                        <div class="garage-forms">\n                          <form class="create-form" id="create">\n                            <input class="form-input" id="create-name" name="name" type="text" required>\n                            <input class="form-color" id="create-color" name="color" type="color" value="#000000">\n                            <button class="btn" id="create-submit">Create</button>\n                          </form>\n                          <form class="update-form" id="update">\n                            <input class="form-input" id="update-name" name="name" type="text" disabled required>\n                            <input class="form-color" id="update-color" name="color" type="color" value="#000000" disabled>\n                            <button class="btn" id="update-submit" href="#" disabled>Update</button>\n                          </form>\n                        </div>\n                        <div class="garage-controls">\n                          <button class="btn race-btn" id="race">Race</button>\n                          <button class="btn reset-btn" id="reset" disabled>Reset</button>\n                          <button class="btn generate-btn" id="generator">Generate cars</button>\n                        </div>\n                        <div class="garage">\n\n                        </div>\n                        <div class="garage-pagination">\n                          <button class="btn pagination-btn" id="garage-prev">Prev</button>\n                          <button class="btn pagination-btn" id="garage-next">Next</button>\n                        </div>\n                      </div>\n                      <div class="winners-container">\n\n                      </div>\n                      `,n}static createGarageCar({id:n,name:e,color:t,engineStarted:r}){return`\n      <div class='car-buttons'>\n        <button class='btn select-btn' id='select-car-${n}'>Select</button>\n        <button class='btn remove-btn' id='remove-car-${n}'>Remove</button>\n        <span class='car-name'>${e}</span>\n      </div>\n      <div class='race'>\n          <div class='start-panel'>\n            <button class='start-engine-btn' id='start-engine-car-${n}${r?"disabled":""}'>A</button>\n            <button disabled class='stop-engine-btn' id='stop-engine-car-${n}${r?"disabled":""}'>B</button>\n            <div class='car' id='car-${n}'>\n              ${this.carImage(t)}\n            </div>\n          </div>\n          <div class='finish-flag' id='finish-${n}'><img src="https://img.icons8.com/ios-glyphs/72/finish-flag.png"></div>\n      </div>\n    `}garageContent(n,e,r){const i=document.querySelector(".garage");return i.innerHTML=`\n        <h1 class='garage-title'>Garage (${e})</h1>\n        <h2 class='garage-page'>Page #${r}</h2>\n        <ul class='garage-cars'>\n          ${n.map((n=>`\n              <li class="garage-car">${t.createGarageCar(n)}</li>\n              `)).join("")}\n        </ul>\n    `,i}static carImage(n){return`\n      <svg class="car-img" version="1.2" xmlns="http://www.w3.org/2000/svg"  width="180px" height="45px" viewBox="0 0 500 160" style="fill:${n}">\n        <path fill-rule="evenodd" d="m4.1 67l3.9-3.6c0 0 11.6 2.1 19.5 1.8 7.8-0.3 16.4-11.7 8-11.5-2 0-4.2-0.4-6.3-1q0 0 0\n          0c-7.1-1.9-14-6.1-14-6.1l-4.2-9c0 0-4.4-7.5 4.6-6.9 9 0.6 18.9 4.4 18.9 4.4 0 0 87.6-21.5 104.7-24.8 17.1-3.3\n          89.6-17.6 153.3 14.5 0 0 40.2 18.9 44.1 19.2 0 0 119.9 5.8 159.4 41 0 0 0.6 12.9 0 21.3 0 0 1.8 5.4-1.3 10.6 0 0 2.1\n          4.2-1.4 3.6l-1.1 8.7c0 0-4.2-2.1-6.1 4.9 0 0-22.1 5.4-28.1 4.1 0 0 6.7-66.9-41.5-66.9-48.1 0-52.7 42.5-53.4 67.1l-1.8\n          1.5c0 0-212.6-6.3-218.3-2.8 0 0-2.1 0-1.7-4 0 0 6.9-65.5-50.2-65.5-57.2 0-44.2 61.3-44.2 61.3 0 0-42.8-9.6-36.3-16.1 0\n          0-14.9-20.3-6.5-45.8zm366.1 5.1c3.2-3.9-41.9-4.4-41.9-4.4 0 0-5 4.8-3.3 9.3 1.6 4.5 25.1 3.8 31.8 3.1 6.8-0.8 13.4-8\n          13.4-8zm-81-19.7c0 0 22.5 0.2 25.6 0 3-0.3 1.9-1.5 1.9-1.5 0 0-5.6-7.7-44.6-24.3-38.9-16.5-62-14.1-62-14.1-107.7 3-87.9\n          16.1-87.9 16.1l8.1 9.4 25.2 4.8 110 6.9zm-102.6 7.1c0 1.2 1 2.2 2.2 2.2h17.7c1.2 0 2.2-1 2.2-2.2 0-1.3-1-2.3-2.2-2.3h-17.7c-1.2\n          0-2.2 1-2.2 2.3zm134.4 18.7c0 0 0.8 34.1-3 42.3l-94.8-3c0 0-28.7 1-39.4-19.8 0 0-9.1-19-10.5-25.5 0.3 2.2 4 37.5 22.9 42.7 19.7\n          5.4 124.8 8.2 124.8 8.2 0 0 4.1-35.1 0-44.9zm46 18q0.2-0.3 0.5-0.8 0.6-0.9 1.3-2 0.2-0.3 0.4-0.7 0.5-0.7 1.1-1.5 0.2-0.3\n          0.4-0.6c0.9-1.1 1.8-2.3 2.8-3.5q0.4-0.5 0.8-0.9c2.2-2.5 4.7-5 7.7-7.4q0.4-0.3 0.8-0.6 0.4-0.3 0.8-0.6 1.1-0.8 2.3-1.6 0.8-0.5\n          1.6-1.1 1.3-0.7 2.6-1.4 0.9-0.5 1.9-0.9 0.4-0.2 0.8-0.4 0.4-0.2 0.8-0.4 0.8-0.3 1.6-0.7 1-0.3 1.9-0.6 1.3-0.5 2.6-0.8 0.4-0.2\n          0.9-0.3 1-0.2 2.1-0.5 1.1-0.2 2.2-0.4 0.7-0.1 1.4-0.2 0.1 0 0.1 0 0.6-0.1 1.2-0.1 1-0.1 2.1-0.2 0.7 0 1.5 0 1.5-0.1 3.1 0c34.1\n          1 44 31.3 44 31.3h8.2c0 0 9.9-5.8 19.8-5.1 10 0.8 3.3-4.3-8.4-6.5-11.7-2.1-22.6-14.4-24.4-17.7-1.8-3.3-45.4-14-72.6-12.8 0 0 40\n          2 70 14.9 0 0 1.1 4.1-11.7 0q-1.6-0.5-3.7-1.3-0.7-0.2-1.5-0.5-2.2-0.8-4.9-1.6-1.7-0.5-3.6-1-0.8-0.2-1.5-0.4-0.7-0.2-1.5-0.3-0.7-0.2-1.5-0.3-0.8-0.2-1.6-0.3-0.9-0.2-1.9-0.3-1-0.2-2-0.2-0.6-0.1-1.1-0.1-0.7-0.1-1.4-0.1-0.1 0-0.3\n          0-1-0.1-2.1-0.1-1 0-2 0.1-1.1 0-2.1 0.1-0.7 0.1-1.4 0.2-0.6 0-1.1 0.1-0.7 0.1-1.5 0.2-0.2 0.1-0.4 0.1-0.7 0.1-1.3\n          0.3c-0.5 0.1-0.9 0.2-1.4 0.4q-0.7 0.1-1.4 0.4-0.8 0.2-1.5 0.4-1.4 0.5-2.9 1.1-0.7 0.3-1.4 0.7-1.6 0.7-3.2 1.7-0.5\n          0.3-1.1 0.7c-0.2 0.1-0.4 0.3-0.6 0.4q-0.4 0.2-0.7 0.5-0.3 0.2-0.6 0.4 0 0 0 0-0.5 0.3-1 0.6-0.5 0.4-1 0.8-0.1 0.1-0.2\n          0.2-0.4 0.3-0.7 0.6-0.6 0.5-1.2 1-0.6 0.5-1.1 1-0.6 0.5-1.1 1.1-0.1 0.1-0.3 0.2-0.7 0.7-1.4 1.5-1.2 1.3-2.4 2.7-0.4\n          0.6-0.9 1.2-1.7 2.2-3.4 4.7-0.7 0.9-1.3 2-1.5 2.3-2.9 5-0.2 0.3-0.3 0.6 0.1-0.1 0.2-0.4zm125.8-8.5c-11.7-13.7-33.5-15.6-33.5-15.6\n          16.3 14.6 33.5 15.6 33.5 15.6zm-345.7 42.5l210.1 4.4c8.4-3.4-23.7-5.1-23.7-5.1 0 0-144.4-5.2-157.6-5.2-13.3\n          0-18.6 1.3-26.3 2.6-7.6 1.3-2.5 3.3-2.5 3.3zm-5.6-32.5c33.7-21.2 17.8-28.8 17.8-28.8 7.9-1.4 152.8 2.9 161.3\n          3.2-8.3-0.4-142.8-6.9-166.7-6.9-24.6 0.1-25.4 8.6-25.4 8.6-21.8-10.9-32.1-8.3-32.1-8.3 33.4 1.4 45.1 32.2 45.1\n          32.2zm-106.6-3.8c3.3 3.8 8.6 5.7 8.6 5.1 1-12.6 10.1-21.6 10.1-21.6-16 4.2-47.2-9-47.2-9-3.2 4.7-1.9 11.9-1.9\n          11.9 18.4 1.1 27.2 9.7 30.4 13.6zm183.3-79c33.3 0.8 93.3 34.8 93.3 34.8-2.1-0.3-19.4 0.4-26.3-1.9-2-0.6-3.2-1.6-2.9-2.8\n          1.3-5.6-1.8-8.2-1.8-8.2 0 0-10.1-6.4-15.9-3.1 0 0-31.7-21.6-84.9-11.4 0 0-3.8 0.4-0.8 5.2 2.7 4.1 5.8 12.7\n          6.6 14.8-17.4-1.2-31.6-2.4-34.8-3.2-9.7-2.3-16.3 0.5-22.2-9.7-5.8-10.2 56.3-15.3 89.7-14.5zm-68.5 18.7c3.1 3 14.5\n          4.4 14.5 4.4 0 0 2.2-3.6-3.2-11.3-0.4-0.5-11.3 3.2-11.3 3.2 0 0-3 0.6 0 3.7zm179.9 38.5h33.2c0.8 0 1.4 0.6 1.4 1.4 0\n          0.7-0.6 1.3-1.4 1.3h-33.2c-0.8 0-1.4-0.6-1.4-1.3 0-0.8 0.6-1.4 1.4-1.4zm-142.5-30.8c0 0 57.2 5 65.6 4.3 0 0-0.2-7.3\n          4.7-6.9 0 0-4.1 4.8 0.1 7.8 0 0-25.6 2.1-70.4-5.2z"/>\n        <path fill-rule="evenodd" d="m218.1 14.9c33.4 0.7 93.4 34.8 93.4 34.8-2.1-0.3-19.4 0.4-26.3-1.9-2-0.7-3.2-1.6-2.9-2.8\n          1.3-5.6-1.8-8.2-1.8-8.2 0 0-10.2-6.4-15.9-3.1 0 0-31.7-21.6-84.9-11.4 0 0-3.8 0.4-0.8 5.1 2.7 4.2 5.8 12.8 6.5\n          14.9-17.3-1.2-31.5-2.4-34.8-3.2-9.6-2.3-16.3 0.5-22.1-9.7-5.9-10.2 56.3-15.3 89.6-14.5zm-68.4 18.7c3.1 3 14.5 4.4 14.5\n          4.4 0 0 2.2-3.7-3.2-11.3-0.4-0.5-11.3 3.2-11.3 3.2 0 0-3.1 0.6 0 3.7z"/>\n        <path fill-rule="evenodd" d="m185.4 42.3c-17.3-1.2-31.5-2.4-34.8-3.2-9.6-2.3-16.3 0.5-22.1-9.7-5.9-10.2 56.3-15.3 89.6-14.5\n          33.4 0.7 93.4 34.8 93.4 34.8-2.1-0.3-19.4 0.4-26.3-1.9-2-0.7-3.2-1.6-2.9-2.8 1.3-5.6-1.8-8.2-1.8-8.2 0 0-10.2-6.4-15.9-3.1 0\n          0-31.7-21.6-84.9-11.4 0 0-3.8 0.4-0.8 5.1 2.7 4.2 5.8 12.8 6.5 14.9zm-35.7-8.7c3.1 3 14.5 4.4 14.5 4.4\n          0 0 2.2-3.7-3.2-11.3-0.4-0.5-11.3 3.2-11.3 3.2 0 0-3.1 0.6 0 3.7z"/>\n        <path d="m276.8 36.1c7.2 3.2 4 8.6 3.9 10.3 0 1.8-16.1 4.5-18.2-1.2-2-5.6 2-10.9 2-10.9 0 0 5.2-1.4 12.3 1.8z"/>\n        <path fill-rule="evenodd" d="m411.5 77.2c22.1 0 40.1 18 40.1 40.2 0 22.2-18 40.2-40.1 40.2-22.2 0-40.2-18-40.2-40.2 0-22.2 18-40.2\n          40.2-40.2zm-32.5 40.2c0 18 14.5 32.5 32.5 32.5 17.9 0 32.4-14.5 32.4-32.5 0-18-14.5-32.5-32.4-32.5-18 0-32.5 14.5-32.5\n          32.5zm10-20.7c0 2.5 1.9 9.1 18.5 18.3-0.4 0.6-0.6 1.3-0.6 2-18.6-1.5-24.1 2.7-25.7 5q-0.3-2.2-0.3-4.6c0-8 3-15.3\n          8.1-20.7zm18.9 23.7c0.5 0.6 1.1 1 1.7 1.3-8.8 15.7-7.6 22.6-6.3 25.2-9-2.4-16.3-8.9-19.9-17.3 2.1 1.1 8.7 2.5\n          24.5-9.2zm3.6-33.6c4.9 0 9.5 1.1 13.6 3.2-2.6 0.9-8.2 5-12.2 23q-0.7-0.2-1.4-0.2-0.4 0-0.8 0c-4.3-20.1-10.6-22.7-12.5-23 4-1.9\n          8.5-3 13.3-3zm1.4 35q1.1-0.3 1.8-1.1c13.8 12.8 20.8 12.7 23.3 11.9-4.5 7.9-12.4 13.6-21.7 15.1 1.6-2.1\n          3.9-8.6-3.4-25.9zm2.9-6.1c18.6-8.3 19.9-15 19.8-17.1 4.1 5.2 6.5 11.7 6.5 18.8q-0.1 4-1 7.7c-1.4-2.4-6.5-7.1-25-7.2q0-0.2\n          0-0.5 0-0.9-0.3-1.7zm-6.1 5.9l-0.1 0.1q0-0.1 0.1-0.1z"/>\n        <path fill-rule="evenodd" d="m92.1 72.8c22.2 0 40.1 18 40.1 40.2 0 22.2-17.9 40.2-40.1 40.2-22.2 0-40.1-18-40.1-40.2 0-22.2\n          17.9-40.2 40.1-40.2zm-32.4 40.2c0 18 14.5 32.5 32.4 32.5 17.9 0 32.4-14.5 32.4-32.5 0-18-14.5-32.5-32.4-32.5-17.9 0-32.4\n          14.5-32.4 32.5zm9.9-20.7c0 2.5 1.9 9.1 18.5 18.3-0.3 0.6-0.6 1.3-0.6 2.1-18.5-1.6-24 2.6-25.7 4.9q-0.3-2.2-0.3-4.6c0-8 3.1-15.3\n          8.1-20.7zm19 23.7c0.4 0.6 1 1 1.7 1.3-8.8 15.7-7.7 22.6-6.4 25.2-8.9-2.4-16.2-8.9-19.9-17.3 2.1 1.1 8.7 2.5 24.6-9.2zm3.5-33.6c4.9\n          0 9.6 1.2 13.7 3.2-2.7 0.9-8.3 5-12.3 23q-0.7-0.2-1.4-0.2-0.4 0-0.8 0c-4.3-20.1-10.6-22.7-12.5-23 4-1.9 8.5-3 13.3-3zm1.4\n          35q1.1-0.3 1.9-1.1c13.7 12.8 20.7 12.7 23.2 11.9-4.5 7.9-12.4 13.6-21.7 15.1 1.6-2.1 3.9-8.6-3.4-25.9zm2.9-6.1c18.6-8.3\n          19.9-15 19.8-17.1 4.1 5.2 6.5 11.7 6.5 18.8q0 4-1 7.7c-1.4-2.4-6.5-7.1-25-7.2q0-0.2\n          0-0.5 0-0.9-0.3-1.7zm-6.1 5.9v0.1q0-0.1 0-0.1z"/>\n      </svg>\n    `}}e.default=t},425:function(n,e,t){var r=this&&this.__awaiter||function(n,e,t,r){return new(t||(t=Promise))((function(i,a){function o(n){try{d(r.next(n))}catch(n){a(n)}}function s(n){try{d(r.throw(n))}catch(n){a(n)}}function d(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(o,s)}d((r=r.apply(n,e||[])).next())}))},i=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});const a=t(4),o=i(t(398));e.default=class{constructor(){this.sortByWins="DESC",this.sortByTime="DESC",this.globalSort="time",this.globalOrder="ASC",this.paginationPage=1}createWinners(n,e,t){return r(this,void 0,void 0,(function*(){document.querySelector(".winners-container").innerHTML=`\n        <div class="winners">\n          <h1 class='winners-title'>Winners (${e})</h1>\n          <h2 class='winners-page'>Page #${t}</h2>\n          <table class="winners-table">\n            <thead>\n              <tr>\n                <th>â„–</th>\n                <th>Car</th>\n                <th>Model</th>\n                <th class="wins-btn">Wins</th>\n                <th class="time-btn">Best time (sec)</th>\n              </tr>\n            </thead>\n            <tbody>\n               ${yield(yield this.createWinnersData(n,t)).join("")} \n            </tbody>\n          </table>\n          <div class="winners-pagination">\n            <button class="btn pagination-btn" id="winners-prev">Prev</button>\n            <button class="btn pagination-btn" id="winners-next">Next</button>\n          </div>\n        </div>`}))}createWinnersData(n,e){return r(this,void 0,void 0,(function*(){return Promise.all(n.map(((n,t)=>r(this,void 0,void 0,(function*(){const r=yield(yield fetch(`${a.GARAGE}/${n.id}`)).json();return` <tr>\n                   <td>${1===e?"":e-1}${t+1}</td>\n                   <td>${o.default.carImage(r.color)}</td>\n                   <td>${r.name}</td>\n                   <td>${n.wins}</td>\n                   <td>${n.time}</td>\n                 </tr>\n               `})))))}))}createWinnerMessage(n,e){return r(this,void 0,void 0,(function*(){const t=document.querySelector("body"),r=document.createElement("div");r.className="winner-message",r.innerHTML=`\n            <p>${n} went first(${e}s)</p>\n    `,setTimeout((()=>{null==r||r.remove()}),a.FIVE_SECONDS),t.appendChild(r)}))}getWinners(n,e,t,i=a.NUMBER_TEN){return r(this,void 0,void 0,(function*(){const o=yield fetch(`${a.WINNERS}?_page=${n}&_limit=${i}&_sort=${e}&_order=${t}`),s=yield o.json();return{winners:yield Promise.all(s.map((n=>r(this,void 0,void 0,(function*(){return Object.assign({},n)}))))),totalCount:o.headers.get("X-Total-Count")}}))}updateWinners(){return r(this,void 0,void 0,(function*(){const{winners:n,totalCount:e}=yield this.getWinners(this.paginationPage,this.globalSort,this.globalOrder);e&&(yield this.createWinners(n,e,this.paginationPage),this.eventListeners())}))}addWinner(n,e){return r(this,void 0,void 0,(function*(){const t=yield fetch(`${a.WINNERS}/${n}`);if(t.status===a.SUCCESS_STATUS){const r=yield t.json();yield fetch(`${a.WINNERS}/${n}`,{method:"PATCH",body:JSON.stringify({id:n,wins:r.wins+1,time:e<r.time?e:r.time}),headers:{"Content-Type":"application/json"}})}else yield fetch(a.WINNERS,{method:"POST",body:JSON.stringify({id:n,wins:1,time:e}),headers:{"Content-Type":"application/json"}});this.updateWinners()}))}eventListeners(){document.getElementById("winners-next").addEventListener("click",(()=>{this.nextAction()})),document.getElementById("winners-prev").addEventListener("click",(()=>r(this,void 0,void 0,(function*(){this.prevAction()})))),document.querySelector(".wins-btn").addEventListener("click",(()=>r(this,void 0,void 0,(function*(){"ASC"===this.sortByWins?(this.sortByWins="DESC",this.globalOrder="DESC"):(this.sortByWins="ASC",this.globalOrder="ASC"),this.globalSort="wins",this.updateWinners()})))),document.querySelector(".time-btn").addEventListener("click",(()=>r(this,void 0,void 0,(function*(){"ASC"===this.sortByTime?(this.sortByTime="DESC",this.globalOrder="DESC"):(this.sortByTime="ASC",this.globalOrder="ASC"),this.globalSort="time",this.updateWinners()}))))}nextAction(){return r(this,void 0,void 0,(function*(){const{totalCount:n}=yield this.getWinners(this.paginationPage,this.globalSort,this.globalOrder);n&&Number(n)/(a.NUMBER_TEN*this.paginationPage)>1&&(this.paginationPage+=1,this.updateWinners())}))}prevAction(){return r(this,void 0,void 0,(function*(){this.paginationPage>1&&(this.paginationPage-=1,this.updateWinners())}))}}},4:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationMap=e.SUCCESS_STATUS=e.ENGINE=e.GARAGE=e.WINNERS=e.NUMBER_ONE_THOUSAND=e.NUMBER_ONE_HUNDRED=e.NUMBER_TWENTY=e.NUMBER_SEVEN=e.NUMBER_TEN=e.FIVE_SECONDS=void 0,e.FIVE_SECONDS=5e3,e.NUMBER_TEN=10,e.NUMBER_SEVEN=7,e.NUMBER_TWENTY=20,e.NUMBER_ONE_HUNDRED=100,e.NUMBER_ONE_THOUSAND=1e3,e.WINNERS="http://127.0.0.1:3000/winners",e.GARAGE="http://127.0.0.1:3000/garage",e.ENGINE="http://127.0.0.1:3000/engine",e.SUCCESS_STATUS=200,e.animationMap={}},143:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.carModels=e.carBrands=void 0,e.carBrands=["Dacia","Daewoo","Daihatsu","Ferrari","Fiat","BMW","Ford","Datsun","Dodge","Toyota","Rolls-Royce","Saab","Saipa","SEAT","Skoda","Subaru","Suzuki","Nissan","Opel","Peugeot","Porsche","Range Rover","Renault","Rivian","Volkswagen","Volvo"],e.carModels=["Captur","Kadjar","RAV4","Rio","Creta","Solaris","Duster","Arkana","Sandero","Logan","X5","X3","Avensis","Camry","Polo","Rapid","CX-30","NX 300h","Civic","Focus","GT-R","F40","Passat","XC90"]},607:function(n,e,t){var r=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(t(717));t(427),t(937),(new i.default).start()}},e={};function t(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={id:r,exports:{}};return n[r].call(a.exports,a,a.exports,t),a.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t(607)})();